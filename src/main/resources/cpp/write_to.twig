{%- for field in fields -%}
  {%- set typeName = trim(macros.getTypeName(utils, field.type)) -%}
  {%- set name = concat(utils.toSnakeCase(field.name), "_") -%}
  {%- set className = utils.getClassName(field.type) -%}
  {
  {%- if (className == "ArrayType") -%}
    {% set elementName = concat(name, "[i]") %}
    for(uint32_t i = 0; i < k{{ field.name }}Length; i++) {
    {{ trim(macros.writePrimary(utils, bufferObjectIdType, field.type.type, elementName)) }}
    }
  {%- elseif (className == "ListType") -%}
    if({{ name }} == null) {
      bob.writeVarUInt32(0);
    } else {
      int size = {{ name }}.size();
      bob.writeVarUInt32(size);
      for(int i = 0; i < size; i++) {
      {{ trim(macros.getBaseType(field.type.type)) }} e = {{ name }}.get(i);
      {{ trim(macros.writePrimary(utils, bufferObjectIdType, field.type.type, "e")) }}
      }
    }
  {% else %}
    {{ trim(macros.writePrimary(utils, bufferObjectIdType, field.type, name)) }}
  {% endif %}
  }
{%- endfor -%}