{%- set name = definition.name.simpleName -%}

{% for p in definition.name.path %}
  {% if (loop.revindex0 != 0) %}
    namespace {{ lower(p) }} {
  {% endif %}
{% endfor %}

{{ name }}::{{ name }}() { }

{{ name }}::{{ name }}(
{%- for field in definition.fields -%}
    {{ trim(macros.getTypeName(utils, field.type)) }} {{ utils.toSnakeCase(field.name) }}
  {%- if (loop.revindex0 != 0) -%}
    ,
  {%- endif -%}
{%- endfor -%})
: {%- for field in definition.fields -%}
  {{ utils.toStructFieldName(field.name) }}({{ utils.toSnakeCase(field.name) }})
  {%- if (loop.revindex0 != 0) -%}
    ,
  {%- endif -%}
{%- endfor -%}
{}

{{ name }}::{{ name }}(const {{ name }}& from) {
  memcpy(this, &from, sizeof({{ name }}));
}

void {{ name }}::Clear() {
{% include "/cpp/struct/clear.twig" %}
}

void {{ name }}::WriteTo(bufobjects::BufferBuilder& _bb) const {
{% include "/cpp/struct/write_to.twig" %}
}

void {{ name }}::ReadFrom(bufobjects::BufferBuilder& _bb) {
{% include "/cpp/struct/read_from.twig" %}
}

void {{ name }}::WriteJsonTo(std::ostream &_os) const {
{% include "/cpp/struct/write_json.twig" %}
}

{% for p in definition.name.path %}
  {% if (loop.revindex0 != 0) %}
    }
  {% endif %}
{% endfor %}
