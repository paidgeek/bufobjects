{%- set name = definition.name.simpleName -%}

{% for p in definition.name.path %}
  {% if (loop.revindex0 != 0) %}
    namespace {{ lower(p) }} {
  {% endif %}
{% endfor %}

{{ name }}::{{ name }}() { }

{{ name }}::{{ name }}(
{%- for field in definition.fields -%}
    {{ trim(macros.getTypeName(utils, field.type)) }} {{ utils.toSnakeCase(field.name) }}
  {%- if (loop.revindex0 != 0) -%}
    ,
  {%- endif -%}
{%- endfor -%})
: {%- for field in definition.fields -%}
  {{ utils.toSnakeCase(field.name) }}_({{ utils.toSnakeCase(field.name) }})
  {%- if (loop.revindex0 != 0) -%}
    ,
  {%- endif -%}
{%- endfor -%}
{}

{{ name }}::{{ name }}(const {{ name }}& from) {
  memcpy(this, &from, sizeof({{ name }}));
}

void {{ name }}::Reset() {
  *this = {{ name }}{};
}

void {{ name }}::WriteTo(bufobjects::BufferObjectBuilder& _bob) const {
if(_bob.GetRemaining() < sizeof({{ name }})) {
  _bob.GrowBuffer(sizeof({{ name }}));
}
{% include "/cpp/struct/write_to.twig" %}
}

void {{ name }}::ReadFrom(bufobjects::BufferObjectBuilder& _bob) {
{% include "/cpp/struct/read_from.twig" %}
}

{% for p in definition.name.path %}
  {% if (loop.revindex0 != 0) %}
    }
  {% endif %}
{% endfor %}
